<!DOCTYPE html>
<html>
<head>
<title>Login / Register</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#2563eb,#1e293b);
}

.auth-container{
  width:380px;
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(25px);
  border-radius:18px;
  padding:30px;
  box-shadow:0 25px 50px rgba(0,0,0,.3);
  color:white;
  overflow:hidden;
}

.toggle-tabs{
  display:flex;
  background:rgba(255,255,255,.15);
  border-radius:50px;
  margin-bottom:25px;
  position:relative;
}

.toggle-btn{
  flex:1;
  text-align:center;
  padding:10px 0;
  cursor:pointer;
  z-index:2;
  font-weight:600;
  color:rgb(0, 0, 0);
}

.slider{
  position:absolute;
  width:50%;
  height:100%;
  background:white;
  border-radius:50px;
  transition:.3s ease;
  left:0;
}

.active-login .slider{ left:0; }
.active-register .slider{ left:50%; }

.active-login .toggle-btn:first-child{ color:#1e293b; }
.active-register .toggle-btn:last-child{ color:#1e293b; }

/* Forms */
.form{
  display:none;
  animation:fade .3s ease;
}

.form.active{ display:block; }

input{
  width:100%;
  padding:12px;
  margin-bottom:14px;
  border-radius:8px;
  border:none;
  outline:none;
  background:rgba(255,255,255,.2);
  color:white;
  font-size:14px;
}

input::placeholder{
  color:rgba(255,255,255,.7);
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:white;
  transition:.2s ease;
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 20px rgba(0,0,0,.2);
}

@keyframes fade{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}
</style>
</head>

<body>

<div class="auth-container active-login" id="authBox">

  <div class="toggle-tabs">
    <div class="slider"></div>
    <div class="toggle-btn" onclick="showLogin()">Login</div>
    <div class="toggle-btn" onclick="showRegister()">Register</div>
  </div>

  <div class="form active" id="loginForm">
    <input id="loginEmail" placeholder="Email">
    <input id="loginPassword" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <div class="form" id="registerForm">
    <input id="regName" placeholder="Full Name">
    <input id="regEmail" placeholder="Email">
    <input id="regPassword" type="password" placeholder="Password">
    <button onclick="register()">Create Account</button>
  </div>

</div>

<script>
const authBox = document.getElementById("authBox");
const loginForm = document.getElementById("loginForm");
const registerForm = document.getElementById("registerForm");

function showLogin(){
  authBox.classList.remove("active-register");
  authBox.classList.add("active-login");
  loginForm.classList.add("active");
  registerForm.classList.remove("active");
}

function showRegister(){
  authBox.classList.remove("active-login");
  authBox.classList.add("active-register");
  registerForm.classList.add("active");
  loginForm.classList.remove("active");
}

function login(){
  let fd = new FormData();
  fd.append("email", loginEmail.value);
  fd.append("password", loginPassword.value);

  fetch("../backend/login.php",{
    method:"POST",
    body:fd
  })
  .then(res=>res.json())
  .then(data=>{
    if(data.success){
      window.location.href="index.html";
    }else{
      alert(data.error);
    }
  });
}

function register(){
  let fd = new FormData();
  fd.append("name", regName.value);
  fd.append("email", regEmail.value);
  fd.append("password", regPassword.value);

  fetch("../backend/register.php",{
    method:"POST",
    body:fd
  })
  .then(res=>res.json())
  .then(data=>{
    if(data.message){
      alert("Registration successful. Please login.");
      showLogin();
    }else{
      alert(data.error);
    }
  });
}
</script>

</body>
</html>
